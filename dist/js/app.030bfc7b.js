(function(){"use strict";var e={2013:function(e,t,r){var o=r(6369),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"SearchForm"},[t("div",{staticClass:"demo-title demo-big"},[e._v(" way-el-form ")]),t("div",{staticClass:"demo-desc demo-big-desc"},[e._v(" 基于 elementUI 封装的 JSON To Form 表单组件，支持 Search 和 Form 两种模式 ")]),t("div",{staticClass:"demo-title"},[e._v(" 查询模式 ")]),t("div",{staticClass:"demo-desc"},[e._v(" 查询模式用户table的表头查询，或者页面的查询 ")]),t("div",{staticClass:"demo-box"},[t("SearchForm")],1),t("div",{staticClass:"demo-title"},[e._v(" 查询模式-单项反馈 ")]),t("div",{staticClass:"demo-desc"},[e._v(" 如果不希望错误的选项框标红可以通过css修改覆盖，这里提供了一个简单的示例 ")]),t("div",{staticClass:"demo-box"},[t("StepForm")],1),t("div",{staticClass:"demo-title"},[e._v(" 表单模式 ")]),t("div",{staticClass:"demo-desc"},[e._v(" 通用表单模式，常用于业务表单 ")]),t("div",{staticClass:"demo-box"},[t("BaseForm")],1),t("div",{staticClass:"demo-title"},[e._v(" 表单模式-分栏 ")]),t("div",{staticClass:"demo-desc"},[e._v(" 分栏模式下，label最好隐藏或者设置为顶部，否则会出现错位；分栏模式可以自定义表单项的分栏宽度 ")]),t("div",{staticClass:"demo-box"},[t("ColForm")],1),t("div",{staticClass:"demo-title"},[e._v(" 配置异步请求数据 ")]),t("div",{staticClass:"demo-desc"},[e._v(" 在main.js注册组件时同步配置全局请求方法，配合formItem的source（api/params/handle）属性可以实现异步数据的获取 ")]),t("div",{staticClass:"demo-box"},[t("AsyncForm")],1)])},a=[],l=function(){var e=this,t=e._self._c;return t("way-el-form",{ref:"queryForm",attrs:{model:"search",inlineBlock:"",formProps:e.formProps,form:e.originData,action:["submit","reset"],actionProps:e.actionProps,showFooter:!1,enableSpin:""},on:{submit:e.handleSubmit,reset:e.handleReset}})},n=[],i={name:"SearchForm",data(){return{formProps:{hideLabel:!0,inline:!0},originData1:[],originData:[{name:"姓名",required:!1,type:"el-input",key:"name"},{name:"工种",type:"el-select",key:"type",required:!1,componentsProps:{clearable:!0},source:{data:[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}]},showName:"name",showValue:"id"}],actionProps:{submit:{componentsProps:{type:"primary",icon:"md-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"md-refresh"},text:"重置"}}}},methods:{handleSubmit(e){if(!e.formValues.name&&!e.formValues.type)return this.$message.error("请输入搜索项，再搜索！");this.$emit("handleSearch",e.formValues)},handleReset(){this.$emit("handleSearch",{})}},watch:{}},u=i,c=r(1001),m=(0,c.Z)(u,l,n,!1,null,"3c5a2ae7",null),p=m.exports,d=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"opation"},[t("label-item",{attrs:{title:"行内换行模式"}},[t("el-switch",{model:{value:e.formProps.inline,callback:function(t){e.$set(e.formProps,"inline",t)},expression:"formProps.inline"}})],1),t("label-item",{attrs:{title:"隐藏标签",tips:"隐藏标签时默认标签位置为顶部"}},[t("el-switch",{model:{value:e.formProps.hideLabel,callback:function(t){e.$set(e.formProps,"hideLabel",t)},expression:"formProps.hideLabel"}})],1),t("label-item",{attrs:{title:"禁用"}},[t("el-switch",{model:{value:e.formProps.disabled,callback:function(t){e.$set(e.formProps,"disabled",t)},expression:"formProps.disabled"}})],1),t("label-item",{attrs:{title:"隐藏必填标记"}},[t("el-switch",{model:{value:e.formProps.hideRequiredAsterisk,callback:function(t){e.$set(e.formProps,"hideRequiredAsterisk",t)},expression:"formProps.hideRequiredAsterisk"}})],1),t("label-item",{attrs:{title:"标签位置"}},[t("el-select",{staticStyle:{width:"120px"},model:{value:e.formProps.labelPosition,callback:function(t){e.$set(e.formProps,"labelPosition",t)},expression:"formProps.labelPosition"}},[t("el-option",{attrs:{value:"left"}},[e._v("左")]),t("el-option",{attrs:{value:"right"}},[e._v("右")]),t("el-option",{attrs:{value:"top"}},[e._v("上")])],1)],1),t("label-item",{attrs:{title:"spin"}},[t("el-switch",{model:{value:e.spin,callback:function(t){e.spin=t},expression:"spin"}})],1),t("label-item",{attrs:{title:"展示底部",tips:"隐藏之后可以通过自定义操作按钮通过ref手动调用方法"}},[t("el-switch",{model:{value:e.showFooter,callback:function(t){e.showFooter=t},expression:"showFooter"}})],1),t("label-item",{attrs:{title:"inlineBlock",tips:"该属性用于定义行内换行模式。如果设置为 true，则表单控件会在同一行中显示，并根据内容自动换行。如果设置为 false，则表单控件会分行显示。     "}},[t("el-switch",{model:{value:e.inlineBlock,callback:function(t){e.inlineBlock=t},expression:"inlineBlock"}})],1),t("label-item",{attrs:{title:"动态修改工种数据源",tips:"静态数据可以通过更改form数据来完成，如果是使用source配置的请求方法，可以通过 this.$refs.queryForm.updateSources('key')来重新获取"}},[t("el-button",{on:{click:e.changeSource}},[e._v("修改数据源")])],1)],1),t("way-el-form",{ref:"queryForm",attrs:{model:"form",inlineBlock:e.inlineBlock,formProps:e.formProps,form:e.originData,enableSpin:e.spin,action:["submit","reset"],actionProps:e.actionProps,showFooter:e.showFooter},on:{submit:e.handleSubmit,reset:e.handleReset}})],1)},h=[],f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"label-item"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.title)+" ")]),e.tips?t("el-popover",{attrs:{"word-wrap":"",width:"300",trigger:"hover",content:e.tips}},[t("i",{staticClass:"el-icon-question",staticStyle:{color:"#25baff"},attrs:{slot:"reference"},slot:"reference"})]):e._e(),t("div",{staticClass:"content"},[e._t("default")],2)],1)},y=[],b={name:"label-item",props:{title:{type:String,default:""},tips:{type:String,default:""}},data(){return{}},methods:{}},g=b,v=(0,c.Z)(g,f,y,!1,null,"2e89712e",null),k=v.exports,P={name:"page-Form",components:{LabelItem:k},data(){return{spin:!1,showFooter:!0,inlineBlock:!0,formProps:{hideLabel:!1,inline:!1,disabled:!1,hideRequiredAsterisk:!1,labelPosition:"left",labelWidth:"120px"},originData:[{name:"姓名",required:!0,type:"el-input",key:"name",value:""},{name:"隐藏字段",hidden:!0,key:"id",value:""},{name:"年龄",required:!0,type:"el-input-number",key:"age",value:1},{name:"工种",type:"el-select",key:"type",required:!0,componentsProps:{clearable:!0},source:{data:[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}]},showName:"name",showValue:"id"},{name:"条件显隐字段",type:"el-switch",key:"visable",value:!1},{name:"自定义校验",required:!0,placeholder:"请输入正整数",type:"el-input-number",key:"batchCount",componentsProps:{min:1},value:1,visitable:(e,t)=>t.visable,rules:[{required:!0,message:"请输入正整数",trigger:["change"],pattern:/^[1-9]\d*$/}]},{name:"复选框",type:"el-checkbox-group",key:"visable2",required:!0,source:{data:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}]}},{name:"单选框",type:"el-radio-group",required:!0,key:"visable2RadioGroup",source:{data:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}]}},{name:"下拉菜单分组",type:"el-select",key:"type2",required:!0,componentsProps:{clearable:!0},custom:{group:!0},source:{data:{"分组1":[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}],"分组2":[{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"}]}},showName:"name",showValue:"id"},{name:"datetime",required:!0,type:"el-date-picker",key:"datetime",componentsProps:{type:"datetime"}},{name:"datetimerange",required:!0,requiredType:"array",type:"el-date-picker",key:"datetimerange",componentsProps:{type:"datetimerange"}},{name:"TimePicker",required:!0,type:"el-time-select",key:"TimePicker",componentsProps:{type:"time"}},{name:"Cascader",required:!0,type:"el-cascader",key:"Cascader",componentsProps:{data:[{value:"beijing",label:"北京",children:[{value:"gugong",label:"故宫"},{value:"tiantan",label:"天坛"},{value:"wangfujing",label:"王府井"}]},{value:"jiangsu",label:"江苏",children:[{value:"nanjing",label:"南京",children:[{value:"fuzimiao",label:"夫子庙"}]},{value:"suzhou",label:"苏州",children:[{value:"zhuozhengyuan",label:"拙政园"},{value:"shizilin",label:"狮子林"}]}]}]}},{name:"Rate",required:!0,type:"el-rate",key:"Rate"},{name:"Upload",type:"el-upload",key:"Upload",required:!0,requiredType:"array",componentsProps:{data:{},action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-success":(e,t,r)=>{console.log(e,t,r)},"on-preview":e=>{console.log(e)},"on-remove":(e,t)=>{console.log(e,t)},"on-progress":(e,t,r)=>{console.log(e,t,r)},"on-change":(e,t)=>{console.log(e,t)},"on-error":(e,t)=>{console.log(e,t)}},slot:e=>e("i",{class:"el-icon-upload"})},{name:"ColorPicker",required:!0,type:"el-color-picker",key:"ColorPicker"},{name:"Slider",required:!0,type:"el-slider",key:"Slider",requiredType:"number"}],actionProps:{submit:{componentsProps:{type:"primary",icon:"el-icon-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"el-icon-refresh"},text:"重置"}}}},beforeMount(){},created(){},mounted(){},methods:{handleSubmit(e){if(console.log(e),!e.formValues.name&&!e.formValues.type)return this.$message.error("请完善表单");this.$emit("handleSearch",e.formValues)},handleReset(){this.$emit("handleSearch",{})},changeSource(){this.originData[3].source.data=[{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"}]}},watch:{}},w=P,q=(0,c.Z)(w,d,h,!1,null,null,null),F=q.exports,S=function(){var e=this,t=e._self._c;return t("div",[t("way-el-form",{ref:"queryForm",attrs:{model:"form",inlineBlock:e.inlineBlock,formProps:e.formProps,form:e.originData,enableSpin:e.spin,action:["submit","reset"],actionProps:e.actionProps,showFooter:e.showFooter},on:{submit:e.handleSubmit,reset:e.handleReset}})],1)},V=[],x={name:"col-Form",components:{},data(){return{spin:!1,showFooter:!0,inlineBlock:!0,formProps:{hideLabel:!1,inline:!1,disabled:!1,hideRequiredMark:!1,labelColon:!0,labelPosition:"top",labelWidth:"100px"},originData:[{type:"Title",name:"查询条件",class:"user-title",slot:e=>[e("i",{class:"el-icon-search"}),e("span","这是自定义分割标题")]},{type:"el-row",props:{gutter:20},children:[{name:"姓名",required:!0,type:"el-input",key:"name",value:""},{name:"隐藏字段",hidden:!0,key:"id",value:""},{name:"年龄",required:!0,type:"el-input-number",key:"age",value:1},{name:"工种",type:"el-select",key:"type",required:!0,componentsProps:{clearable:!0},source:{data:[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}]},showName:"name",showValue:"id"},{name:"条件显隐字段",type:"el-switch",key:"visable",value:!1},{name:"自定义校验",required:!0,placeholder:"请输入正整数",type:"el-input-number",key:"batchCount",componentsProps:{min:1},colProps:{xs:24,sm:24,md:24,lg:24},value:1,visitable:(e,t)=>t.visable,rules:[{required:!0,message:"请输入正整数",trigger:["change"],pattern:/^[1-9]\d*$/}]}]}],actionProps:{submit:{componentsProps:{type:"primary",icon:"el-icon-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"el-icon-refresh"},text:"重置"}}}},methods:{handleSubmit(e){if(console.log(e),!e.formValues.name&&!e.formValues.type)return this.$message.error("请完善表单");this.$emit("handleSearch",e.formValues)},handleReset(){this.$emit("handleSearch",{})},changeSource(){this.originData[3].source.data=[{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"}]}},watch:{}},$=x,C=(0,c.Z)($,S,V,!1,null,null,null),D=C.exports,_=function(){var e=this,t=e._self._c;return t("way-el-form",{ref:"queryForm",attrs:{singleStepErrorTip:"",model:"search",inlineBlock:"",formProps:e.formProps,form:e.originData,enableSpin:!1,action:["submit","reset"],actionProps:e.actionProps,showFooter:!1},on:{submit:e.handleSubmit,reset:e.handleReset}})},O=[],j={name:"SearchForm",data(){return{formProps:{hideLabel:!0,inline:!0},originData:[{name:"姓名",required:!0,type:"el-input",key:"name",value:""},{name:"工种",type:"el-select",key:"type",required:!0,componentsProps:{clearable:!0},source:{data:[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}]},showName:"name",showValue:"id"}],actionProps:{submit:{componentsProps:{type:"primary",icon:"md-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"md-refresh"},text:"重置"}}}},methods:{handleSubmit(e){(e.formValues.name||e.formValues.type)&&this.$emit("handleSearch",e.formValues)},handleReset(){this.$emit("handleSearch",{})}},watch:{}},R=j,B=(0,c.Z)(R,_,O,!1,null,"117546a3",null),T=B.exports,E=function(){var e=this,t=e._self._c;return t("div",[t("way-el-form",{ref:"queryForm",attrs:{model:"form",inlineBlock:e.inlineBlock,formProps:e.formProps,form:e.originData,enableSpin:e.spin,action:["submit","reset"],actionProps:e.actionProps,showFooter:e.showFooter,strict:""},on:{submit:e.handleSubmit,reset:e.handleReset}})],1)},I=[],A={name:"col-Form",components:{},data(){return{spin:!1,showFooter:!0,inlineBlock:!0,formProps:{hideLabel:!1,inline:!1,disabled:!1,hideRequiredMark:!1,labelColon:!0,labelPosition:"top",labelWidth:"100px"},originData:[{type:"el-row",props:{gutter:20},children:[{name:"姓名",required:!0,type:"el-input",key:"name",value:""},{name:"隐藏字段",hidden:!0,key:"id",value:""},{name:"年龄",required:!0,type:"el-input-number",key:"age",value:1},{name:"工种",type:"el-select",key:"type",required:!0,requiredType:"number",componentsProps:{clearable:!0},source:{api:"/api/waybill/waybillTypeList",params:{type:"1",limit:100},handle:e=>e},showName:"name",showValue:"id"},{name:"条件显隐字段",type:"el-switch",key:"visable",value:!1},{name:"自定义校验",required:!0,placeholder:"请输入正整数",type:"el-input-number",key:"batchCount",componentsProps:{min:1},colProps:{xs:24,sm:24,md:24,lg:24},value:1,visitable:(e,t)=>t.visable,rules:[{required:!0,message:"请输入正整数",trigger:["change"],pattern:/^[1-9]\d*$/}]}]}],actionProps:{submit:{componentsProps:{type:"primary",icon:"el-icon-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"el-icon-refresh"},text:"重置"}}}},methods:{handleSubmit(e){if(!e.formValues.name&&!e.formValues.type)return this.$message.error("请完善表单");this.$emit("handleSearch",e.formValues)},handleReset(){this.$emit("handleSearch",{})},changeSource(){this.originData[3].source.data=[{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"}]},simulateAPIRequest(){return new Promise((e=>{setTimeout((()=>{const t=[{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"}];e(t)}),2e3)}))}},watch:{}},L=A,N=(0,c.Z)(L,E,I,!1,null,null,null),Z=N.exports,G={data(){return{formProps:{hideLabel:!0,inline:!0},originData:[{name:"姓名",required:!1,type:"Input",key:"name",value:""},{name:"工种",type:"Select",key:"type",required:!1,componentsProps:{clearable:!0},source:{data:[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"}]},showName:"name",showValue:"id"}],actionProps:{submit:{componentsProps:{type:"primary",icon:"md-search"},text:"查询"},reset:{componentsProps:{type:"default",icon:"md-refresh"},text:"重置"}}}},components:{SearchForm:p,BaseForm:F,ColForm:D,StepForm:T,AsyncForm:Z},methods:{},watch:{}},M=G,z=(0,c.Z)(M,s,a,!1,null,"2e8356a7",null),U=z.exports;r(7658);const K={"el-input":"string","el-input-number":"number","el-radio":"boolean","el-radio-group":"string","el-checkbox":"boolean","el-checkbox-group":"array","el-switch":"boolean","el-select":"string","el-time-select":"string","el-date-picker":"string","el-cascader":"array","el-rate":"number","el-slider":"number","el-color-picker":"string"},W=(e,t)=>!(!e||!t)&&Object.prototype.hasOwnProperty.call(e,t);var J,H,Q={name:"way-el-form",props:{model:{type:String,default:"form"},singleStepErrorTip:{type:Boolean,default:!1},enableSpin:{type:Boolean,default:!0},inlineBlock:{type:Boolean,default:!1},form:{type:Array,require:!0},status:{type:String,default:"add"},formProps:{type:Object,default:()=>({})},formEvents:{type:Object,default:()=>({})},formItemProps:{type:Object,default:()=>({})},showFooter:{type:Boolean,default:!0},footerRowProps:{type:Object,default:()=>({})},action:{type:Array,default:()=>["submit"]},actionProps:{type:Object,default:()=>({})},strict:{type:Boolean,default:!1}},data(){return{isFirstInit:!0,formContent:{},requests:{},rules:{},sourceData:{},formValues:{},formInitValues:""}},render(e){const t=this;if(0==Object.keys(this.formValues).length&&this.enableSpin)return e("div",{directives:[{name:"loading",value:!0}]});let r=t.generatorForm(e,this.formContent);return e("div",{attrs:{class:`my-custom-form ${this.formProps.hideLabel?"my-custom-form-hide-label":""} ${this.formProps.class||""} ${"search"==this.model?"my-custom-search":""}`}},[e("el-form",{ref:"formValues",props:{model:this.formValues,rules:this.rules,...this.formProps,labelPosition:this.formProps.hideLabel?"top":this.formProps.labelPosition},on:{...this.formEvents}},[r,"form"==this.model?t.generatorFooter(e):t.generatorFormButton(e)])])},methods:{formRef(){return this.$refs.formValues},async generatorRluesAndRequests(){let e=this.collectFormContent(this.form);if(this.formContent=e.formContent,this.rules=e.rules,this.requests=e.requests,this.isFirstInit){let t=Object.keys(e.requests).map((t=>e.requests[t]()));t&&t.length>0&&await Promise.allSettled(t).catch((e=>{console.warn(e)})),this.formValues=e.formData,this.isFirstInit=!1}this.formInitValues=Object.assign({},e.formData)},collectFormContent(e=[]){console.log("data");let t={formContent:[],formData:{},rules:{},requests:{}},r=["el-input","el-input-number"];return e.forEach((e=>{if(W(e,"key")&&("el-input-number"===e.type?t.formData[e.key]=W(e,"value")?e.value:null:"el-checkbox-group"===e.type?t.formData[e.key]=W(e,"value")?e.value:[]:t.formData[e.key]=W(e,"value")?e.value:void 0),W(e,"rules")&&e.rules.length>0&&(t.rules[e.key]=e.rules),e.required){let o=W(e,"requiredType")?e.requiredType:K[e.type]||"string",s={required:!0,message:`${r.includes(e.type)?"请填写":"请选择"}${e.name}`,trigger:"change",type:o};W(t.rules,e.key)&&t.rules[e.key].length>0?t.rules[e.key]=[s,...t.rules[e.key]]:t.rules[e.key]=[s]}W(e,"source")&&W(e.source,"api")&&W(e,"key")?t.requests[e.key]=this.generatorRequestFunc(e):W(e,"source")&&W(e.source,"data")?this.sourceData[e.key]=e.source.data:!W(this.sourceData,e.key)&&(this.sourceData[e.key]=[]),e.placeholder||(e.placeholder=(r.includes(e.type)?"请填写":"请选择")+e.name);let o=Object.assign({},e);if(W(o,"source")&&delete o.source,"el-row"==e.type&&W(e,"children")&&e.children.length>0){let r=this.collectFormContent(e.children);t.rules=Object.assign(t.rules,r.rules),t.formData=Object.assign(t.formData,r.formData),t.requests=Object.assign(t.requests,r.requests),o.children=r.formContent}t.formContent.push(o)})),t},generatorFormButton(e,t){return e("el-form-item",{class:"my-custom-form-buttons"},[this.generatorFooterButton(e,t)])},generatorFooterButton(e){const t={reset:e("el-button",{props:{type:"default"},on:{click:()=>{this.reset()}}},"重置"),submit:e("el-button",{props:{type:"primary"},on:{click:()=>{this.submit()}}},"search"===this.model?"搜索":"add"==this.status?"保存":"修改")};return this.action.map((r=>W(this.actionProps,r)?e("el-button",{props:{type:"default",...this.actionProps[r].componentsProps},on:{click:()=>{["submit","reset"].includes(r)&&this[r]()},...this.actionProps[r].componentsEvents}},this.actionProps[r].text):t[r]))},generatorFooter(e){if(this.showFooter)return e("el-row",{class:"my-custom-form-footer",props:{justify:"end",...this.footerRowProps}},[this.generatorFooterButton(e)])},generatorRow(e,t){let r=[];return t.children&&t.children.length>0&&t.children.forEach((t=>{if(W(t,"visitable")&&t.visitable(this.status,this.formValues)||!W(t,"visitable")&&W(t,"type")){let o=this.generatorCol(e,t);r.push(o)}})),e("el-row",{props:{...t.props},class:`my-custom-form-row ${t.class?t.class:""}`,style:{...t.style}},r)},generatorCol(e,t){const r=t.colProps?t.colProps:{};let o=e("el-col",{key:t.key,props:{xs:12,sm:12,md:12,lg:6,...r}},[this.generatorFormItem(e,t)]);return o},generatorTitle(e,t){const r=t.props?t.props:{};return console.log(r),e("el-row",{props:{...r}},[e("h3",{class:`my-custom-form-title ${t.class?t.class:""}`,style:{...t.style}},t.slot?[t.slot(e)]:t.name)])},reBuildFormItemProps(e){const t=e.reduce(((e,t)=>(e[t.rowKey]||(e[t.rowKey]=[]),e[t.rowKey].push(t),e)),{});return t},generatorForm(e,t){if(!t)return;let r=[];for(let o=0;o<t.length;o++){let s=t[o];if(["el-row","Title"].includes(s.type))switch(s.type){case"el-row":r.push(this.generatorRow(e,s));break;case"Title":r.push(this.generatorTitle(e,s));break;default:break}else if(W(s,"visitable")&&s.visitable(this.status,this.formValues)||!W(s,"visitable")){let t=this.inlineBlock?this.generatorInlineBlock(e,s):this.generatorBlock(e,s);r.push(t)}}return r},generatorInlineBlock(e,t){if(!W(t,"hidden"))return this.generatorFormItem(e,t)},generatorBlock(e,t){if(!W(t,"hidden"))return e("el-row",{props:{...t.props}},[this.generatorFormItem(e,t)])},generatorFormItem(e,t){return e("el-form-item",{key:t.key,props:{prop:t.key,label:t.name},class:`my-custom-form-item ${t.class?t.class:""}`,style:{...t.style}},[this.generatorItem(e,t)])},generatorItem(e,t){switch(t.type){case"el-select":return this.generatorSelect(e,t);case"el-radio-group":return this.generatorRadioGroup(e,t);case"el-checkbox-group":return this.generatorCheckboxGroup(e,t);default:return this.generatorComponents(e,t)}},generatorComponents(e,t){return console.log(t.type),console.log(t.placeholder),this.strict&&W(K,t.type)||!this.strict?e(t.type,{props:{...this.generatorDefaultProps(t),...this.generatorSourceData(t),...t.componentsProps},attrs:{placeholder:t.placeholder},on:{...this.generatorDefaultEvents(t),...t.componentsEvents}},t.slot?[this.$slots.default,t.slot(e)]:this.$slots.default):e("span",{style:{color:"red"}},`Unaccepted component types '${t.type}'`)},generatorSourceData(e){let t={};const r=["el-cascader","AutoComplete","el-transfer"];return r.includes(e.type)&&W(this.sourceData,e.key)?t["data"]=this.sourceData[e.key]:t["data"]=[],t},generatorRadioGroup(e,t){const r=this;return e("el-radio-group",{props:{value:r.formValues[t.key],...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},r.generatorRadio(e,t,r.sourceData[t.key]))},generatorRadio(e,t,r){let o=r&&r.length>0?r:t.options||[],s=[];const{optionProps:a}=t;for(let l=0;l<o.length;l++){let r=o[l],n=e("el-radio",{props:{label:r[t.showValue]||r.value,...a}},r[t.showName||"label"]);s.push(n)}return s},generatorCheckboxGroup(e,t){const r=this;return e("el-checkbox-group",{props:{value:r.formValues[t.key],...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},r.generatorCheckbox(e,t,r.sourceData[t.key]))},generatorCheckbox(e,t,r){let o=r&&r.length>0?r:t.options||[],s=[];const{optionProps:a}=t;for(let l=0;l<o.length;l++){let r=o[l],n=e("el-checkbox",{props:{label:r[t.showValue]||r.value,...a},key:r[t.showValue]||r.value},r[t.showName||"label"]);s.push(n)}return console.log("generatorCheckbox",s),s},generatorSelect(e,t){const r=this;return e("el-select",{props:{value:r.formValues[t.key],placeholder:t.placeholder,...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},t.custom&&t.custom.group?r.generatorOptionsGroup(e,t,r.sourceData[t.key]):r.generatorOptions(e,t,r.sourceData[t.key]))},generatorOptionsGroup(e,t,r=[]){let o=[];for(let s in r){let a=e("el-option-group",{props:{label:s}},this.generatorOptions(e,t,r[s]));o.push(a)}return o},generatorOptions(e,t,r=[]){let o=[];for(let s=0;s<r.length;s++){let a=r[s],l=e("el-option",{props:{value:a[t.showValue||"value"]}},a[t.showName||"label"]);o.push(l)}return o},generatorDefaultProps(e){return{value:this.formValues[e.key],placeholder:e.placeholder}},generatorDefaultEvents(e){return["el-date-picker"].includes(e.type)?{"on-change":t=>{this.formValues[e.key]=t}}:{input:t=>{this.formValues[e.key]=t}}},generatorRequestFunc(e){const t=e.source.requestType||"request";if(!this.$wayElForm)return console.error("请在Vue实例上挂载$wayElForm对象,并配置request方法");if(!this.$wayElForm[t])return console.error(`请在$wayElForm对象上配置‘${t}’方法`);const r=this.$wayElForm[t],o=this;let s=e.source;return async function(){try{const{api:t,params:a,handle:l}=s,n=await r(t,a);return o.sourceData[e.key]=l?l(n):n.page.list,n}catch(t){return{error:t}}}},async updateSources(e=[]){if(!e)return;let t=[];if("[object Array]"===Object.prototype.toString.call(e))for(let r=0;r<e.length;r++)t.push(this.requests[e[r]]());else t=[this.requests[e]()];0!==t.length&&(await Promise.allSettled(t).catch((e=>{console.warn(e)})),this.$forceUpdate())},submit(){this.$refs["formValues"].validate((e=>{if(this.$emit("submit",{valid:e,formValues:this.formValues}),!e&&"search"===this.model){let e=[],t=[];Object.keys(this.$refs["formValues"].$children).forEach((r=>{let o=this.$refs["formValues"].$children[r];"error"===o.validateState&&(e.push(o.validateMessage),t.push(o.label))})),this.singleStepErrorTip?this.$message.error(e[0]):this.$message.error(`请完善${t.length>0?t.join("、"):"查询条件"}`)}}))},setFormValue(e,t){W(this.formValues,e)?this.formValues[e]=t:console.error("表单中不存在"+e+"属性")},reset(){this.$refs["formValues"].resetFields(),this.$emit("reset"),this.$nextTick((()=>{this.formValues=Object.assign({},this.formInitValues)}))},setFormData(e){e&&(this.$refs["formValues"].resetFields(),this.$nextTick((()=>{Object.keys(e).forEach((t=>{W(this.formValues,t)&&(this.formValues[t]=e[t])}))})))}},watch:{form:{handler(){this.generatorRluesAndRequests()},deep:!0,immediate:!0}}},X=Q,Y=(0,c.Z)(X,J,H,!1,null,null,null),ee=Y.exports;ee.install=(e,t)=>{"undefined"!==typeof window&&window.Vue&&(e=window.Vue),t&&"function"===typeof t?e.prototype.$wayElForm={request:t}:t&&"object"===typeof t&&(e.prototype.$wayElForm=t),e.component(ee.name,ee)};var te=ee,re=r(8499),oe=r.n(re);function se(e,t){return new Promise((e=>{setTimeout((()=>{e([{name:"张三",age:18,id:1},{name:"李四",age:19,id:2},{name:"王五",age:20,id:3}])}),1e3)}))}o["default"].use(oe()),o["default"].use(te,{request:se}),o["default"].config.productionTip=!1,new o["default"]({render:e=>e(U)}).$mount("#app")}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,o,s,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],a=e[c][2];for(var n=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[i])}))?o.splice(i--,1):(n=!1,a<l&&(l=a));if(n){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,s,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,l=o[0],n=o[1],i=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(i)var c=i(r)}for(t&&t(o);u<l.length;u++)a=l[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},o=self["webpackChunkway_el_form"]=self["webpackChunkway_el_form"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(2013)}));o=r.O(o)})();
//# sourceMappingURL=app.030bfc7b.js.map
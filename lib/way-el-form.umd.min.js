(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["way-el-form"]=t():e["way-el-form"]=t()})("undefined"!==typeof self?self:this,(function(){return function(){var e={9662:function(e,t,r){var o=r(614),n=r(6330),s=TypeError;e.exports=function(e){if(o(e))return e;throw s(n(e)+" is not a function")}},9670:function(e,t,r){var o=r(111),n=String,s=TypeError;e.exports=function(e){if(o(e))return e;throw s(n(e)+" is not an object")}},1318:function(e,t,r){var o=r(5656),n=r(1400),s=r(6244),i=function(e){return function(t,r,i){var a,u=o(t),c=s(u),l=n(i,c);if(e&&r!=r){while(c>l)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},3658:function(e,t,r){"use strict";var o=r(9781),n=r(3157),s=TypeError,i=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(n(e)&&!i(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4326:function(e,t,r){var o=r(1702),n=o({}.toString),s=o("".slice);e.exports=function(e){return s(n(e),8,-1)}},9920:function(e,t,r){var o=r(2597),n=r(3887),s=r(1236),i=r(3070);e.exports=function(e,t,r){for(var a=n(t),u=i.f,c=s.f,l=0;l<a.length;l++){var f=a[l];o(e,f)||r&&o(r,f)||u(e,f,c(t,f))}}},8880:function(e,t,r){var o=r(9781),n=r(3070),s=r(9114);e.exports=o?function(e,t,r){return n.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8052:function(e,t,r){var o=r(614),n=r(3070),s=r(6339),i=r(3072);e.exports=function(e,t,r,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:t;if(o(r)&&s(r,c,a),a.global)u?e[t]=r:i(t,r);else{try{a.unsafe?e[t]&&(u=!0):delete e[t]}catch(l){}u?e[t]=r:n.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:function(e,t,r){var o=r(7854),n=Object.defineProperty;e.exports=function(e,t){try{n(o,e,{value:t,configurable:!0,writable:!0})}catch(r){o[e]=t}return t}},9781:function(e,t,r){var o=r(7293);e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,r="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:function(e,t,r){var o=r(7854),n=r(111),s=o.document,i=n(s)&&n(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},7207:function(e){var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,r){var o,n,s=r(7854),i=r(8113),a=s.process,u=s.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(o=l.split("."),n=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!n&&i&&(o=i.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=i.match(/Chrome\/(\d+)/),o&&(n=+o[1]))),e.exports=n},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,r){var o=r(7854),n=r(1236).f,s=r(8880),i=r(8052),a=r(3072),u=r(9920),c=r(4705);e.exports=function(e,t){var r,l,f,p,h,m,y=e.target,d=e.global,g=e.stat;if(l=d?o:g?o[y]||a(y,{}):(o[y]||{}).prototype,l)for(f in t){if(h=t[f],e.dontCallGetSet?(m=n(l,f),p=m&&m.value):p=l[f],r=c(d?f:y+(g?".":"#")+f,e.forced),!r&&void 0!==p){if(typeof h==typeof p)continue;u(h,p)}(e.sham||p&&p.sham)&&s(h,"sham",!0),i(l,f,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,r){var o=r(7293);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,r){var o=r(4374),n=Function.prototype.call;e.exports=o?n.bind(n):function(){return n.apply(n,arguments)}},6530:function(e,t,r){var o=r(9781),n=r(2597),s=Function.prototype,i=o&&Object.getOwnPropertyDescriptor,a=n(s,"name"),u=a&&"something"===function(){}.name,c=a&&(!o||o&&i(s,"name").configurable);e.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},1702:function(e,t,r){var o=r(4374),n=Function.prototype,s=n.call,i=o&&n.bind.bind(s,s);e.exports=o?i:function(e){return function(){return s.apply(e,arguments)}}},5005:function(e,t,r){var o=r(7854),n=r(614),s=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(o[e]):o[e]&&o[e][t]}},8173:function(e,t,r){var o=r(9662),n=r(8554);e.exports=function(e,t){var r=e[t];return n(r)?void 0:o(r)}},7854:function(e,t,r){var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,r){var o=r(1702),n=r(7908),s=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(n(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,r){var o=r(9781),n=r(7293),s=r(317);e.exports=!o&&!n((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,r){var o=r(1702),n=r(7293),s=r(4326),i=Object,a=o("".split);e.exports=n((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):i(e)}:i},2788:function(e,t,r){var o=r(1702),n=r(614),s=r(5465),i=o(Function.toString);n(s.inspectSource)||(s.inspectSource=function(e){return i(e)}),e.exports=s.inspectSource},9909:function(e,t,r){var o,n,s,i=r(4811),a=r(7854),u=r(111),c=r(8880),l=r(2597),f=r(5465),p=r(6200),h=r(3501),m="Object already initialized",y=a.TypeError,d=a.WeakMap,g=function(e){return s(e)?n(e):o(e,{})},v=function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw y("Incompatible receiver, "+e+" required");return r}};if(i||f.state){var b=f.state||(f.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,o=function(e,t){if(b.has(e))throw y(m);return t.facade=e,b.set(e,t),t},n=function(e){return b.get(e)||{}},s=function(e){return b.has(e)}}else{var w=p("state");h[w]=!0,o=function(e,t){if(l(e,w))throw y(m);return t.facade=e,c(e,w,t),t},n=function(e){return l(e,w)?e[w]:{}},s=function(e){return l(e,w)}}e.exports={set:o,get:n,has:s,enforce:g,getterFor:v}},3157:function(e,t,r){var o=r(4326);e.exports=Array.isArray||function(e){return"Array"==o(e)}},614:function(e,t,r){var o=r(4154),n=o.all;e.exports=o.IS_HTMLDDA?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},4705:function(e,t,r){var o=r(7293),n=r(614),s=/#|\.prototype\./,i=function(e,t){var r=u[a(e)];return r==l||r!=c&&(n(t)?o(t):!!t)},a=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},u=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,r){var o=r(614),n=r(4154),s=n.all;e.exports=n.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:o(e)||e===s}:function(e){return"object"==typeof e?null!==e:o(e)}},1913:function(e){e.exports=!1},2190:function(e,t,r){var o=r(5005),n=r(614),s=r(7976),i=r(3307),a=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return n(t)&&s(t.prototype,a(e))}},6244:function(e,t,r){var o=r(7466);e.exports=function(e){return o(e.length)}},6339:function(e,t,r){var o=r(1702),n=r(7293),s=r(614),i=r(2597),a=r(9781),u=r(6530).CONFIGURABLE,c=r(2788),l=r(9909),f=l.enforce,p=l.get,h=String,m=Object.defineProperty,y=o("".slice),d=o("".replace),g=o([].join),v=a&&!n((function(){return 8!==m((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===y(h(t),0,7)&&(t="["+d(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!i(e,"name")||u&&e.name!==t)&&(a?m(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&i(r,"arity")&&e.length!==r.arity&&m(e,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?a&&m(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(n){}var o=f(e);return i(o,"source")||(o.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return s(this)&&p(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?r:t)(o)}},3070:function(e,t,r){var o=r(9781),n=r(4664),s=r(3353),i=r(9670),a=r(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",h="writable";t.f=o?s?function(e,t,r){if(i(e),t=a(t),i(r),"function"===typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var o=l(e,t);o&&o[h]&&(e[t]=r.value,r={configurable:p in r?r[p]:o[p],enumerable:f in r?r[f]:o[f],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(i(e),t=a(t),i(r),n)try{return c(e,t,r)}catch(o){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:function(e,t,r){var o=r(9781),n=r(6916),s=r(5296),i=r(9114),a=r(5656),u=r(4948),c=r(2597),l=r(4664),f=Object.getOwnPropertyDescriptor;t.f=o?f:function(e,t){if(e=a(e),t=u(t),l)try{return f(e,t)}catch(r){}if(c(e,t))return i(!n(s.f,e,t),e[t])}},8006:function(e,t,r){var o=r(6324),n=r(748),s=n.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,s)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,r){var o=r(1702);e.exports=o({}.isPrototypeOf)},6324:function(e,t,r){var o=r(1702),n=r(2597),s=r(5656),i=r(1318).indexOf,a=r(3501),u=o([].push);e.exports=function(e,t){var r,o=s(e),c=0,l=[];for(r in o)!n(a,r)&&n(o,r)&&u(l,r);while(t.length>c)n(o,r=t[c++])&&(~i(l,r)||u(l,r));return l}},5296:function(e,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,n=o&&!r.call({1:2},1);t.f=n?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},2140:function(e,t,r){var o=r(6916),n=r(614),s=r(111),i=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&n(r=e.toString)&&!s(a=o(r,e)))return a;if(n(r=e.valueOf)&&!s(a=o(r,e)))return a;if("string"!==t&&n(r=e.toString)&&!s(a=o(r,e)))return a;throw i("Can't convert object to primitive value")}},3887:function(e,t,r){var o=r(5005),n=r(1702),s=r(8006),i=r(5181),a=r(9670),u=n([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=s.f(a(e)),r=i.f;return r?u(t,r(e)):t}},4488:function(e,t,r){var o=r(8554),n=TypeError;e.exports=function(e){if(o(e))throw n("Can't call method on "+e);return e}},6200:function(e,t,r){var o=r(2309),n=r(9711),s=o("keys");e.exports=function(e){return s[e]||(s[e]=n(e))}},5465:function(e,t,r){var o=r(7854),n=r(3072),s="__core-js_shared__",i=o[s]||n(s,{});e.exports=i},2309:function(e,t,r){var o=r(1913),n=r(5465);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:o?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,r){var o=r(7392),n=r(7293),s=r(7854),i=s.String;e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},1400:function(e,t,r){var o=r(9303),n=Math.max,s=Math.min;e.exports=function(e,t){var r=o(e);return r<0?n(r+t,0):s(r,t)}},5656:function(e,t,r){var o=r(8361),n=r(4488);e.exports=function(e){return o(n(e))}},9303:function(e,t,r){var o=r(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},7466:function(e,t,r){var o=r(9303),n=Math.min;e.exports=function(e){return e>0?n(o(e),9007199254740991):0}},7908:function(e,t,r){var o=r(4488),n=Object;e.exports=function(e){return n(o(e))}},7593:function(e,t,r){var o=r(6916),n=r(111),s=r(2190),i=r(8173),a=r(2140),u=r(5112),c=TypeError,l=u("toPrimitive");e.exports=function(e,t){if(!n(e)||s(e))return e;var r,u=i(e,l);if(u){if(void 0===t&&(t="default"),r=o(u,e,t),!n(r)||s(r))return r;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,r){var o=r(7593),n=r(2190);e.exports=function(e){var t=o(e,"string");return n(t)?t:t+""}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(r){return"Object"}}},9711:function(e,t,r){var o=r(1702),n=0,s=Math.random(),i=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++n+s,36)}},3307:function(e,t,r){var o=r(6293);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,r){var o=r(9781),n=r(7293);e.exports=o&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,r){var o=r(7854),n=r(614),s=o.WeakMap;e.exports=n(s)&&/native code/.test(String(s))},5112:function(e,t,r){var o=r(7854),n=r(2309),s=r(2597),i=r(9711),a=r(6293),u=r(3307),c=o.Symbol,l=n("wks"),f=u?c["for"]||c:c&&c.withoutSetter||i;e.exports=function(e){return s(l,e)||(l[e]=a&&s(c,e)?c[e]:f("Symbol."+e)),l[e]}},7658:function(e,t,r){"use strict";var o=r(2109),n=r(7908),s=r(6244),i=r(3658),a=r(7207),u=r(7293),c=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},f=c||!l();o({target:"Array",proto:!0,arity:1,forced:f},{push:function(e){var t=n(this),r=s(t),o=arguments.length;a(r+o);for(var u=0;u<o;u++)t[r]=arguments[u],r++;return i(t,r),r}})}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}!function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p=""}();var o={};return function(){"use strict";if(r.r(o),r.d(o,{default:function(){return m}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(r.p=t[1])}r(7658);const n={"el-input":"string","el-input-number":"number","el-radio":"boolean","el-radio-group":"string","el-checkbox":"boolean","el-checkbox-group":"array","el-switch":"boolean","el-select":"string","el-time-select":"string","el-date-picker":"string","el-cascader":"array","el-rate":"number","el-slider":"number","el-color-picker":"string"},s=(e,t)=>!(!e||!t)&&Object.prototype.hasOwnProperty.call(e,t);var i,a,u={name:"way-el-form",props:{model:{type:String,default:"form"},singleStepErrorTip:{type:Boolean,default:!1},enableSpin:{type:Boolean,default:!0},inlineBlock:{type:Boolean,default:!1},form:{type:Array,require:!0},status:{type:String,default:"add"},formProps:{type:Object,default:()=>({})},formEvents:{type:Object,default:()=>({})},formItemProps:{type:Object,default:()=>({})},showFooter:{type:Boolean,default:!0},footerRowProps:{type:Object,default:()=>({})},action:{type:Array,default:()=>["submit"]},actionProps:{type:Object,default:()=>({})},strict:{type:Boolean,default:!1}},data(){return{isFirstInit:!0,formContent:{},requests:{},rules:{},sourceData:{},formValues:{},formInitValues:""}},render(e){const t=this;if(0==Object.keys(this.formValues).length&&this.enableSpin)return e("div",{directives:[{name:"loading",value:!0}]});let r=t.generatorForm(e,this.formContent);return e("div",{attrs:{class:`my-custom-form ${this.formProps.hideLabel?"my-custom-form-hide-label":""} ${this.formProps.class||""} ${"search"==this.model?"my-custom-search":""}`}},[e("el-form",{ref:"formValues",props:{model:this.formValues,rules:this.rules,...this.formProps,labelPosition:this.formProps.hideLabel?"top":this.formProps.labelPosition},on:{...this.formEvents}},[r,"form"==this.model?t.generatorFooter(e):t.generatorFormButton(e)])])},methods:{formRef(){return this.$refs.formValues},async generatorRluesAndRequests(){let e=this.collectFormContent(this.form);if(this.formContent=e.formContent,this.rules=e.rules,this.requests=e.requests,this.isFirstInit){let t=Object.keys(e.requests).map((t=>e.requests[t]()));t&&t.length>0&&await Promise.allSettled(t).catch((e=>{console.warn(e)})),this.formValues=e.formData,this.isFirstInit=!1}this.formInitValues=Object.assign({},e.formData)},collectFormContent(e=[]){console.log("data");let t={formContent:[],formData:{},rules:{},requests:{}},r=["el-input","el-input-number"];return e.forEach((e=>{if(s(e,"key")&&("el-input-number"===e.type?t.formData[e.key]=s(e,"value")?e.value:null:"el-checkbox-group"===e.type?t.formData[e.key]=s(e,"value")?e.value:[]:t.formData[e.key]=s(e,"value")?e.value:void 0),s(e,"rules")&&e.rules.length>0&&(t.rules[e.key]=e.rules),e.required){let o=s(e,"requiredType")?e.requiredType:n[e.type]||"string",i={required:!0,message:`${r.includes(e.type)?"请填写":"请选择"}${e.name}`,trigger:"change",type:o};s(t.rules,e.key)&&t.rules[e.key].length>0?t.rules[e.key]=[i,...t.rules[e.key]]:t.rules[e.key]=[i]}s(e,"source")&&s(e.source,"api")&&s(e,"key")?t.requests[e.key]=this.generatorRequestFunc(e):s(e,"source")&&s(e.source,"data")?this.sourceData[e.key]=e.source.data:!s(this.sourceData,e.key)&&(this.sourceData[e.key]=[]),e.placeholder||(e.placeholder=(r.includes(e.type)?"请填写":"请选择")+e.name);let o=Object.assign({},e);if(s(o,"source")&&delete o.source,"el-row"==e.type&&s(e,"children")&&e.children.length>0){let r=this.collectFormContent(e.children);t.rules=Object.assign(t.rules,r.rules),t.formData=Object.assign(t.formData,r.formData),t.requests=Object.assign(t.requests,r.requests),o.children=r.formContent}t.formContent.push(o)})),t},generatorFormButton(e,t){return e("el-form-item",{class:"my-custom-form-buttons"},[this.generatorFooterButton(e,t)])},generatorFooterButton(e){const t={reset:e("el-button",{props:{type:"default"},on:{click:()=>{this.reset()}}},"重置"),submit:e("el-button",{props:{type:"primary"},on:{click:()=>{this.submit()}}},"search"===this.model?"搜索":"add"==this.status?"保存":"修改")};return this.action.map((r=>s(this.actionProps,r)?e("el-button",{props:{type:"default",...this.actionProps[r].componentsProps},on:{click:()=>{["submit","reset"].includes(r)&&this[r]()},...this.actionProps[r].componentsEvents}},this.actionProps[r].text):t[r]))},generatorFooter(e){if(this.showFooter)return e("el-row",{class:"my-custom-form-footer",props:{justify:"end",...this.footerRowProps}},[this.generatorFooterButton(e)])},generatorRow(e,t){let r=[];return t.children&&t.children.length>0&&t.children.forEach((t=>{if(s(t,"visitable")&&t.visitable(this.status,this.formValues)||!s(t,"visitable")&&s(t,"type")){let o=this.generatorCol(e,t);r.push(o)}})),e("el-row",{props:{...t.props},class:`my-custom-form-row ${t.class?t.class:""}`,style:{...t.style}},r)},generatorCol(e,t){const r=t.colProps?t.colProps:{};let o=e("el-col",{key:t.key,props:{xs:12,sm:12,md:12,lg:6,...r}},[this.generatorFormItem(e,t)]);return o},generatorTitle(e,t){const r=t.props?t.props:{};return console.log(r),e("el-row",{props:{...r}},[e("h3",{class:`my-custom-form-title ${t.class?t.class:""}`,style:{...t.style}},t.slot?[t.slot(e)]:t.name)])},reBuildFormItemProps(e){const t=e.reduce(((e,t)=>(e[t.rowKey]||(e[t.rowKey]=[]),e[t.rowKey].push(t),e)),{});return t},generatorForm(e,t){if(!t)return;let r=[];for(let o=0;o<t.length;o++){let n=t[o];if(["el-row","Title"].includes(n.type))switch(n.type){case"el-row":r.push(this.generatorRow(e,n));break;case"Title":r.push(this.generatorTitle(e,n));break;default:break}else if(s(n,"visitable")&&n.visitable(this.status,this.formValues)||!s(n,"visitable")){let t=this.inlineBlock?this.generatorInlineBlock(e,n):this.generatorBlock(e,n);r.push(t)}}return r},generatorInlineBlock(e,t){if(!s(t,"hidden"))return this.generatorFormItem(e,t)},generatorBlock(e,t){if(!s(t,"hidden"))return e("el-row",{props:{...t.props}},[this.generatorFormItem(e,t)])},generatorFormItem(e,t){return e("el-form-item",{key:t.key,props:{prop:t.key,label:t.name},class:`my-custom-form-item ${t.class?t.class:""}`,style:{...t.style}},[this.generatorItem(e,t)])},generatorItem(e,t){switch(t.type){case"el-select":return this.generatorSelect(e,t);case"el-radio-group":return this.generatorRadioGroup(e,t);case"el-checkbox-group":return this.generatorCheckboxGroup(e,t);default:return this.generatorComponents(e,t)}},generatorComponents(e,t){return console.log(t.type),console.log(t.placeholder),this.strict&&s(n,t.type)||!this.strict?e(t.type,{props:{...this.generatorDefaultProps(t),...this.generatorSourceData(t),...t.componentsProps},attrs:{placeholder:t.placeholder},on:{...this.generatorDefaultEvents(t),...t.componentsEvents}},t.slot?[this.$slots.default,t.slot(e)]:this.$slots.default):e("span",{style:{color:"red"}},`Unaccepted component types '${t.type}'`)},generatorSourceData(e){let t={};const r=["el-cascader","AutoComplete","el-transfer"];return r.includes(e.type)&&s(this.sourceData,e.key)?t["data"]=this.sourceData[e.key]:t["data"]=[],t},generatorRadioGroup(e,t){const r=this;return e("el-radio-group",{props:{value:r.formValues[t.key],...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},r.generatorRadio(e,t,r.sourceData[t.key]))},generatorRadio(e,t,r){let o=r&&r.length>0?r:t.options||[],n=[];const{optionProps:s}=t;for(let i=0;i<o.length;i++){let r=o[i],a=e("el-radio",{props:{label:r[t.showValue]||r.value,...s}},r[t.showName||"label"]);n.push(a)}return n},generatorCheckboxGroup(e,t){const r=this;return e("el-checkbox-group",{props:{value:r.formValues[t.key],...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},r.generatorCheckbox(e,t,r.sourceData[t.key]))},generatorCheckbox(e,t,r){let o=r&&r.length>0?r:t.options||[],n=[];const{optionProps:s}=t;for(let i=0;i<o.length;i++){let r=o[i],a=e("el-checkbox",{props:{label:r[t.showValue]||r.value,...s},key:r[t.showValue]||r.value},r[t.showName||"label"]);n.push(a)}return console.log("generatorCheckbox",n),n},generatorSelect(e,t){const r=this;return e("el-select",{props:{value:r.formValues[t.key],placeholder:t.placeholder,...t.componentsProps},on:{input:e=>{r.formValues[t.key]=e},...t.componentsEvents}},t.custom&&t.custom.group?r.generatorOptionsGroup(e,t,r.sourceData[t.key]):r.generatorOptions(e,t,r.sourceData[t.key]))},generatorOptionsGroup(e,t,r=[]){let o=[];for(let n in r){let s=e("el-option-group",{props:{label:n}},this.generatorOptions(e,t,r[n]));o.push(s)}return o},generatorOptions(e,t,r=[]){let o=[];for(let n=0;n<r.length;n++){let s=r[n],i=e("el-option",{props:{value:s[t.showValue||"value"]}},s[t.showName||"label"]);o.push(i)}return o},generatorDefaultProps(e){return{value:this.formValues[e.key],placeholder:e.placeholder}},generatorDefaultEvents(e){return["el-date-picker"].includes(e.type)?{"on-change":t=>{this.formValues[e.key]=t}}:{input:t=>{this.formValues[e.key]=t}}},generatorRequestFunc(e){const t=e.source.requestType||"request";if(!this.$wayElForm)return console.error("请在Vue实例上挂载$wayElForm对象,并配置request方法");if(!this.$wayElForm[t])return console.error(`请在$wayElForm对象上配置‘${t}’方法`);const r=this.$wayElForm[t],o=this;let n=e.source;return async function(){try{const{api:t,params:s,handle:i}=n,a=await r(t,s);return o.sourceData[e.key]=i?i(a):a.page.list,a}catch(t){return{error:t}}}},async updateSources(e=[]){if(!e)return;let t=[];if("[object Array]"===Object.prototype.toString.call(e))for(let r=0;r<e.length;r++)t.push(this.requests[e[r]]());else t=[this.requests[e]()];0!==t.length&&(await Promise.allSettled(t).catch((e=>{console.warn(e)})),this.$forceUpdate())},submit(){this.$refs["formValues"].validate((e=>{if(this.$emit("submit",{valid:e,formValues:this.formValues}),!e&&"search"===this.model){let e=[],t=[];Object.keys(this.$refs["formValues"].$children).forEach((r=>{let o=this.$refs["formValues"].$children[r];"error"===o.validateState&&(e.push(o.validateMessage),t.push(o.label))})),this.singleStepErrorTip?this.$message.error(e[0]):this.$message.error(`请完善${t.length>0?t.join("、"):"查询条件"}`)}}))},setFormValue(e,t){s(this.formValues,e)?this.formValues[e]=t:console.error("表单中不存在"+e+"属性")},reset(){this.$refs["formValues"].resetFields(),this.$emit("reset"),this.$nextTick((()=>{this.formValues=Object.assign({},this.formInitValues)}))},setFormData(e){e&&(this.$refs["formValues"].resetFields(),this.$nextTick((()=>{Object.keys(e).forEach((t=>{s(this.formValues,t)&&(this.formValues[t]=e[t])}))})))}},watch:{form:{handler(){this.generatorRluesAndRequests()},deep:!0,immediate:!0}}},c=u;function l(e,t,r,o,n,s,i,a){var u,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(e,t){return u.call(t),l(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:e,options:c}}var f=l(c,i,a,!1,null,null,null),p=f.exports;p.install=(e,t)=>{"undefined"!==typeof window&&window.Vue&&(e=window.Vue),t&&"function"===typeof t?e.prototype.$wayElForm={request:t}:t&&"object"===typeof t&&(e.prototype.$wayElForm=t),e.component(p.name,p)};var h=p,m=h}(),o}()}));
//# sourceMappingURL=way-el-form.umd.min.js.map